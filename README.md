# php5-planet
某Y社のPHP4向けオブジェクト指向フレームワーク「Planet」の命名規則とコーディング規約をパクッてPHP5向けに作りました。様々な案件で採用し、中には賞を頂いた現場もあります。

１．フォルダの構成

１．フォルダの構成

・Test:テストコードを記載
・Define:各種定数を記載した.phpファイルを格納
・DB:データベースを扱うクラスを記載した.phpファイルを格納
・Config:各種設定ファイルを格納
・Common:各フォルダ(Action,BissinesLogic,DB)のスーパークラスを記載した.phpファイルを格納
・Action:各種入力(GET,POSTリクエスト及びコンソール入力)と払い出し(smarty又はjson)を制御するクラスを記載した.phpファイルを格納
・BissinesLogic:ユースケース個別の実処理を制御するクラスを記載した.phpファイルを格納。
・Util:バッチ処理やメンテナンスに使用するシェルスクリプトやSPAのルーティングの設定ファイルが記載されたファイルを格納
・Log:各種ログを格納
・templates:smarty及びメールのテンプレートが記載されたファイルを格納
・vendor:composer,smartyが使用
・webroot:データベースのバックアップや、ユーザが用意したドキュメント等を格納。webサーバの公開領域と多数シンボリックリンクが張ってある

２．ユースケースの追加

①下記ファイルにルーティング情報(URI、アクション名)を追記。
./Config/routing_define_template.txt

②./Util/routeing.sh を打鍵して実行

③./Action/【アクション名】Controller.php に下記の部分があるのでフォームハンドラーのチェック情報を記載

        //--------------------------------------------------------------------------
        // 入力チェック 書き方は input_check.txtを参照
        //--------------------------------------------------------------------------
        $this->ChkParam = array(
            "【ハンドラ名】"=>"パラメータ",
        );
★パラメータ：メソッド(GETかPOST) 存在の強制 チェック方法 正規表現 文字列長の上限 エラー処理の種類
例"backurl" =>"ALL NO REG (^[a-zA-Z0-9.!#$%&@*+/=:?_{|}-]+$) M OK

３．DBの接続

①./DBに専用クラスを作る。内容は既存ファイルをコピペして名前を変更する。
②./Define/db.phpに接続情報を既存のコードを参考に記載。
③で作ったクラスのコンストラクタ無いにスーパークラスのコンストラクタを接続情報を
引数にして呼び出す。既存のコードを参考に記載。
④./Common/BL_Base.phpのコンストラクタで以下のように呼び出す。($db はBL_Baseクラスで宣言)
$this->db=new 【①で作ったクラス】;

２．ユースケースの追加

①下記ファイルにルーティング情報(URI、アクション名)を追記。
./Config/routing_define_template.txt

②./Util/routeing.sh を打鍵して実行

③./Action/【アクション名】Controller.php に下記の部分があるのでフォームハンドラーのチェック情報を記載

        //--------------------------------------------------------------------------
        // 入力チェック 書き方は input_check.txtを参照
        //--------------------------------------------------------------------------
        $this->ChkParam = array(
            "【ハンドラ名】"=>"パラメータ",
        );
★パラメータ：メソッド(GETかPOST) 存在の強制 チェック方法 正規表現 文字列長の上限 エラー処理の種類
例"backurl" =>"ALL NO REG (^[a-zA-Z0-9.!#$%&@*+/=:?_{|}-]+$) M OK

３．DBの接続

①./DBに専用クラスを作る。内容は既存ファイルをコピペして名前を変更する。
②./Define/db.phpに接続情報を既存のコードを参考に記載。
③で作ったクラスのコンストラクタ無いにスーパークラスのコンストラクタを接続情報を
引数にして呼び出す。既存のコードを参考に記載。
④./Common/BL_Base.phpのコンストラクタで以下のように呼び出す。($db はBL_Baseクラスで宣言)
$this->db=new 【①で作ったクラス】;
